(this.webpackJsonpred=this.webpackJsonpred||[]).push([[0],{134:function(e,n,t){},137:function(e,n,t){"use strict";t.r(n);var r=t(0),a=t.n(r),i=t(21),o=t.n(i),c=t(6),s=t(9),d=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:20,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:10;return Array.from(Array(e),(function(){return new Array(n).fill([0,"clear"])}))},A=function(e,n,t){for(var r=t.x,a=t.y,i=0;i<e.tetromino.length;i++)for(var o=0;o<e.tetromino.length;o++)if(0!==e.tetromino[i][o]&&(!n[i+e.pos.y+a]||!n[i+e.pos.y+a][o+e.pos.x+r]||"clear"!==n[i+e.pos.y+a][o+e.pos.x+r][1]))return!0;return!1},l=t(64),p=t.n(l)()("http://localhost:4242"),u=function(e,n,t,a,i,o,s,A){var l=Object(r.useState)(d()),u=Object(c.a)(l,2),x=u[0],m=u[1],b=Object(r.useState)(d(4,4)),g=Object(c.a)(b,2),f=g[0],j=g[1],h=Object(r.useState)(0),O=Object(c.a)(h,2),v=O[0],y=O[1];return Object(r.useEffect)((function(){y(0);var r=function(n){var r=n.map((function(e){return e.map((function(e){return"clear"===e[1]?[0,"clear"]:e}))}));return e.tetromino.forEach((function(n,t){n.forEach((function(n,a){0!==n&&(r[t+e.pos.y][a+e.pos.x]=[n,"".concat(e.collided?"merged":"clear")])}))})),e.collided&&!a?(t(r),j(d(4,4)),p.emit("Stage",{stage:x,player:i,room:o,players:s}),function(e){return e.reduce((function(n,t){return-1===t.findIndex((function(e){return 0===e[0]||"P"===e[0]}))?(y((function(e){return e+1})),n.unshift(new Array(e[0].length).fill([0,"clear"])),n):(n.push(t),n)}),[])}(r)):r};A.length>0&&n.tetromino?n.tetromino.forEach((function(e,t){e.forEach((function(e,r){0!==e&&(f[t][r]=[e,"".concat(n.collided?"merged":"clear")])}))})):j(d(4,4)),m((function(e){return r(e)}))}),[e]),[x,f,m,v]},x=t(3),m={0:{shape:[[0]],color:"0, 0, 0"},P:{shape:[[0]],color:"36, 37, 38"},I:{shape:[["I","I","I","I"],[0,0,0,0],[0,0,0,0],[0,0,0,0]],color:"204, 0, 0"},J:{shape:[[0,"J",0],[0,"J",0],["J","J",0]],color:"102, 255, 102"},L:{shape:[[0,"L",0],[0,"L",0],[0,"L","L"]],color:"102, 255, 102"},S:{shape:[[0,"S","S"],["S","S",0],[0,0,0]],color:"75, 181, 255"},T:{shape:[["T","T","T"],[0,"T",0],[0,0,0]],color:"255, 6, 251"},Z:{shape:[["Z","Z",0],[0,"Z","Z"],[0,0,0]],color:"75, 181, 255"},D:{shape:[["D","D",0],["D","D",0],[0,0,0]],color:"35, 155, 86"}},b="UPDATE_MEMBER",g="CHANGE_PIECE",f="START_GAME",j="GAME_OVER",h="UPDATE_NAME",O="ROOM_JOINED",v="CLEAR_PIECES",y="UPDATE_MODE";var E,w,I,C,S,k,R,J,z,Q,T,P,_,B,D,N,L,Y,M,G="ADD_PLAYER_NAME",U="UPDATE_PLAYER",H="ADMIN_PLAYER",X="PLAYER_LOST",W="SET_ROW",Z=t(7),q=t(4),F=t(5),K=F.a.input(E||(E=Object(q.a)(["\npadding: 15px;\nborder-radius: 10px;\nborder: 4px solid #333;\ncolor: #fff;\nbackground: #000;\nmargin: 0.5em;\noutline: none;\nwidth: 60%;\nmin-width: 300px;\nfont-size: 24px;\n::placeholder {\n  color: #fff;\n}\n@media screen and (max-width: 768px) {\n  font-size: 18px;\n}\n@media screen and (max-width: 480px) {\n  font-size: 16px;\n}\n"]))),V=F.a.button(w||(w=Object(q.a)(["\npadding: 12px;\nborder-radius: 10px;\nborder: 4px solid #333;\ncolor: #ffffff;\nbackground: #000;\nfont-size: 24px;\ncursor: pointer;\nmargin: 0.5em;\nwidth: 20%;\nmin-width: 160px;\n:hover {\n  background: #333;\n}\n@media screen and (max-width: 768px) {\n  font-size: 18px;\n  min-width: 135px;\n\n}\n@media screen and (max-width: 480px) {\n  font-size: 16px;\n  min-width: 135px;\n\n}\n"]))),$=F.a.form(I||(I=Object(q.a)(["\n  display: flex;\n  flex-direction: column;\n  align-items: center;\n  justify-content: center;\n  top: 50%;\n  left: 50%;\n  position: absolute;\n  margin: auto;\n  width: 50%;\n  padding: 10px;\n  transform: translate(-50%, -50%);\n  @media screen and (max-width: 768px) {\n  }\n  @media screen and (max-width: 480px) {\n  }\n"]))),ee=F.a.div(C||(C=Object(q.a)(["\ndisplay: flex;\nflex-direction: column;\nalign-items: center;\njustify-content: center;\nwidth: 100%;\ntop: 30%;\nleft: 50%;\nposition: absolute;\ntransform: translate(-50%, -30%);\n@media screen and (max-width: 768px) {\n}\n@media screen and (max-width: 480px) {\n}\n"]))),ne=F.a.form(S||(S=Object(q.a)(["\ndisplay: flex;\nflex-direction: column;\nalign-items: center;\njustify-content: center;\n\nmargin: auto;\npadding: 10px;\n\n@media screen and (max-width: 768px) {\n}\n@media screen and (max-width: 480px) {\n}\n"]))),te=F.a.div(k||(k=Object(q.a)(["\ndisplay: flex;\nalign-items: center;\n@media screen and (max-width: 768px) {\n  flex-direction: column;\n}\n@media screen and (max-width: 480px) {\n  flex-direction: column;\n}\n"]))),re=F.a.select(R||(R=Object(q.a)(["\npadding: 21px;\nborder-radius: 10px;\nborder: 4px solid #333;\ncolor: #fff;\nbackground: #000;\nmargin: 0.5em;\noutline: none;\nwidth: 15%;\nmin-width: 160px;\nfont-size: 24px;\n@media screen and (max-width: 768px) {\n  font-size: 18px;\n  width: 95%;\n  padding: 15px;\n}\n@media screen and (max-width: 480px) {\n  font-size: 16px;\n  width: 80%;\n  padding: 15px;\n  min-width: 300px;\n}\n"]))),ae=F.a.table(J||(J=Object(q.a)(["\nborder-width: 5px;\nbackground: #000;\nborder-collapse: collapse;\nborder-spacing: 0;\nwidth: 50%;\nborder: 1px solid #333;\nfont-size: 18px;\n@media screen and (max-width: 768px) {\n  width: 80%;\n}\n@media screen and (max-width: 480px) {\n  width: 100%;\n}\n"]))),ie=F.a.thead(z||(z=Object(q.a)(["\n"]))),oe=F.a.tbody(Q||(Q=Object(q.a)(["\n"]))),ce=F.a.tr(T||(T=Object(q.a)(["\nborder-width: 5px;\n"]))),se=F.a.th(P||(P=Object(q.a)(["\n"]))),de=F.a.td(_||(_=Object(q.a)(["\n"]))),Ae=F.a.button(B||(B=Object(q.a)(["\npadding: 12px;\nborder-radius: 10px;\nborder: 4px solid #333;\ncolor: #000;\nbackground: #fff;\n\ncursor: pointer;\nmargin: 0.5em;\n\n\n:hover {\n  background: #333;\n  color: #fff;\n}\n\n"]))),le=t(1),pe=function(){var e=Object(Z.b)(),n=Object(r.useState)(""),t=Object(c.a)(n,2),a=t[0],i=t[1];function o(n){var t;n.preventDefault(),""!==a.trim()?e((t=a.trim(),{type:G,data:t})):(i(""),s.b.error("[ERROR] Player and Room names must be 1 to 12 alphanumeric characters in length"))}return Object(r.useEffect)((function(){document.getElementById("username-i").focus()})),Object(le.jsxs)($,{onSubmit:function(e){return o(e)},children:[Object(le.jsx)(K,{id:"username-i",placeholder:"Enter Username",onChange:function(e){return i(e.target.value)}}),Object(le.jsx)(V,{children:"Submit"})]})},ue=F.a.div(D||(D=Object(q.a)(["\n  width: auto;\n  background: rgba(",", 0.8);\n  border: ",";\n  border-bottom-color: rgba(",", 0.5);\n  border-top-color: rgba(",", 1);\n  border-right-color: rgba(",", 1);\n  border-left-color: rgba(",", 0.5);\n"])),(function(e){return e.color}),(function(e){return 0===e.type?"0px solid":"4px solid"}),(function(e){return e.color}),(function(e){return e.color}),(function(e){return e.color}),(function(e){return e.color})),xe=function(e){var n,t=e.type;return Object(le.jsx)(ue,{type:t,color:null===(n=m[t])||void 0===n?void 0:n.color})},me=a.a.memo(xe),be=F.a.div(N||(N=Object(q.a)(["\n  position: relative;\n  display: grid;\n  grid-template-rows: repeat(20, calc(499px / 10));\n  grid-template-columns: repeat(10, calc(1002px / 20));\n  grid-gap: 1px;\n  border: 4px solid #333;\n  background: #111;\n  width: 518px;\n  height: 1024px;\n  @media screen and (max-width: 768px) {\n    grid-template-rows: repeat(20, calc(299px / 10));\n    grid-template-columns: repeat(10, calc(602px / 20));\n    width: 320px;\n    height: 624px;\n  }\n  @media screen and (max-width: 480px) {\n    grid-template-rows: repeat(20, calc(199px / 10));\n    grid-template-columns: repeat(10, calc(401px / 20));\n    width: 220px;\n    height: 424px;\n  }\n"]))),ge=F.a.div(L||(L=Object(q.a)(["\n  position: absolute;\n  width: 100%;\n  height: 100%;\n  top: 0;\n  left: 0;\n  right: 0;\n  bottom: 0;\n  background-color: #333333;\n  z-index: 2;\n  outline: 4px solid #333333;\n  opacity: 0.9;\n"]))),fe=F.a.div(Y||(Y=Object(q.a)(['\n  position: absolute;\n  top: 50%;\n  left: 50%;\n  display: flex;\n  flex-direction: column;\n  padding: 1px;\n  font-size: 25px;\n  align-items: center;\n  color: white;\n  transform: translate(-50%,-50%);\n  -ms-transform: translate(-50%,-50%);\n  h1 {\n    color: white;\n    font-family: "Oxanium";\n    font-size: xxx-large;\n    text-shadow: none;\n    text-align: center;\n    font-weight: bolder;\n    padding: 50px 0px 50px;\n    letter-spacing: 3px;\n  }\n  p {\n\n  }\n  @media screen and (max-width: 768px) {\n    h1 {\n      color: white;\n      font-family: "Oxanium";\n      font-size: xxx-large;\n      text-shadow: none;\n      text-align: center;\n      font-weight: bolder;\n      padding: 50px 0px 50px;\n      letter-spacing: 3px;\n    }\n  }\n  @media screen and (max-width: 480px) {\n    h1 {\n      color: white;\n      font-family: "Oxanium";\n      font-size: xxx-large;\n      text-shadow: none;\n      text-align: center;\n      font-weight: bolder;\n      padding: 50px 0px 50px;\n      letter-spacing: 3px;\n      font-size: large;\n    }\n  }\n']))),je=F.a.div(M||(M=Object(q.a)(["\n  text-align: center;  \n"]))),he=t.p+"static/media/README.3fe7dfc2.gif";function Oe(e){var n=e.player;return Object(le.jsx)(ge,{children:Object(le.jsxs)(fe,{children:[!0===(null===n||void 0===n?void 0:n.lost)?Object(le.jsx)("img",{style:{width:"200px"},src:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAZAAAAEECAYAAAAGSGKZAAAABHNCSVQICAgIfAhkiAAABRJJREFUeJzt3UFO7DgUQFH6q5dYy8wef096CJLr4mATnzNGEKcSrjx45Y8PAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAgK/9s/oCJvq7+gJ+2KrPbtV9fsp6T1vHae/lqEf87/2z+gIA+J0EBIBEQABIBASAREAASAQEgERAAEgEBIBEQABIfsM05NAk6+v1uvs6tnJd1+iPTp0YXnWfn7Le09Zx2ns56obnYAk7EAASAQEgERAAEgEBIBEQABIBASAREAASAQEgERAAkn8X/u2tJ2h/ga0nlWcbvb7rurY+g3v2Onb/3GY78P3dmh0IAImAAJAICACJgACQCAgAiYAAkAgIAImAAJAICADJHZPou0+Yz54AXTX5vPWk8qozs9+Y9J76d2c7bcL8F3jE5PhsdiAAJAICQCIgACQCAkAiIAAkAgJAIiAAJAICQCIgACQrz0Tf3SMmvXf/u6sm1leZvd7T7t/C9230GyeOmli3AwEgERAAEgEBIBEQABIBASAREAASAQEgERAAEgEBIDGJ/rWhidLRCVWTwLxj9zPbV1l4X46aMB9lBwJAIiAAJAICQCIgACQCAkAiIAAkAgJAIiAAJAICQHLHJPqSCe43zpAePduYT6yaBD5wAn508tnz/DNm3+dHTLbbgQCQCAgAiYAAkAgIAImAAJAICACJgACQCAgAiYAAkKw8E33riXW+zSQ10z3l/X3jGzG2nli3AwEgERAAEgEBIBEQABIBASAREAASAQEgERAAEgEBINl6yvFNp000r5r0XvXMrFqH+/c53zTwPY/432sHAkAiIAAkAgJAIiAAJAICQCIgACQCAkAiIAAkAgJAsvJM9FGnTbI+YkKVL532PJ/mqPfXDgSAREAASAQEgERAAEgEBIBEQABIBASAREAASAQEgGTl1OTQRO7r9br7OrZyXdfU3zf7/r1xfVPPzF61jtOev1Hu3+dueD+2ZgcCQCIgACQCAkAiIAAkAgJAIiAAJAICQCIgACQCAkByx5noW08WrzK63tGf2329fM7n9j2r7t8N7+/Q/8mPzSfW7UAASAQEgERAAEgEBIBEQABIBASAREAASAQEgERAAEjumETf3ezJztGJUljptOd+dL27r2NrdiAAJAICQCIgACQCAkAiIAAkAgJAIiAAJAICQCIgACQnTqLzDbPPfB79fU+xar1POYP7DZ6/H2AHAkAiIAAkAgJAIiAAJAICQCIgACQCAkAiIAAkAgJAYhL94a7rGvq52RO5Cyeul/zdUQuv7xET5g96rh7xediBAJAICACJgACQCAgAiYAAkAgIAImAAJAICACJgACQnDiJPno29FMMTbzufob5G5PAoxO+pz0Hj1jv7t+ssPs3IcxmBwJAIiAAJAICQCIgACQCAkAiIAAkAgJAIiAAJAICQLLyXN6tJ59XuWHierapn9vC9Xr+vmHVRPjsSe8HfbPCEnYgACQCAkAiIAAkAgJAIiAAJAICQCIgACQCAkAiIAAkW085/u8RZzm/4Td8JiNGP7fd13va8zdq1dnzS76R4Aa7P/dD7EAASAQEgERAAEgEBIBEQABIBASAREAASAQEgERAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAANjGf4qh1GyMCe1eAAAAAElFTkSuQmCC"}):Object(le.jsx)("img",{style:{width:"200px"},src:he}),Object(le.jsx)("h1",{children:!0===(null===n||void 0===n?void 0:n.lost)?"You lost":"You Won"}),Object(le.jsx)("p",{children:!0===(null===n||void 0===n?void 0:n.admin)?"Click on \u27f3 to restart the game":"Wait for host player to restart the game"})]})})}var ve,ye,Ee,we,Ie,Ce,Se,ke,Re=function(e){var n=e.stage,t=e.gameOver,r=e.player;return n?Object(le.jsxs)(be,{width:n[0].length,height:n.length,children:[t&&Object(le.jsx)(Oe,{player:r}),n.map((function(e,n){return e.map((function(e,n){return Object(le.jsx)(me,{type:e[0]},n)}))}))]}):Object(le.jsx)("span",{children:"Loading..."})},Je=F.a.div(ve||(ve=Object(q.a)(["\n  box-sizing: border-box;\n  display: flex;\n  flex-direction: column;\n  margin: 0 0 20px 0;\n  padding: 10px;\n  border-radius: 10px;\n  border: 4px solid #333;\n  color: ",";\n  background: #000;\n  font-size: 0.8 rem;\n  position: relative;\n  width: 150px;\n  height: 92px;\n  justify-content: center;\n  align-items: center;\n  padding-top: 20px;\n  @media screen and (max-width: 768px) {\n    width: 100px;\n    height: 102px;\n  }\n  @media screen and (max-width: 480px) {\n    width: 90px;\n    height: 60px;\n  }\n"])),(function(e){return e.gameOver?"red":"#999"})),ze=F.a.div(ye||(ye=Object(q.a)(["\n  box-sizing: border-box;\n  display: flex;\n  flex-direction: column;\n  align-items: center;\n  margin: 0 0 20px 0;\n  padding: 10px;\n  border-radius: 10px;\n  border: 4px solid #333;\n  color: ",";\n  background: #000;\n  font-size: 0.8 rem;\n  position: relative;\n  width: 150px;\n  height: 132px;\n  @media screen and (max-width: 768px) {\n    width: 100px;\n    height: 102px;\n  }\n  @media screen and (max-width: 480px) {\n    width: 90px;\n    height: 90px;\n  }\n"])),(function(e){return e.gameOver?"red":"#999"})),Qe=F.a.div(Ee||(Ee=Object(q.a)(["\n  position: absolute;\n  top: 0;\n  left: 50%;\n  border-radius: 20px;\n  padding: 6px 20px;\n  margin: 0px 0px 20px 0px;\n  background: #333;\n  font-size: 0.8 rem;\n  color: white;\n  transform: translate(-50%, -50%);\n  @media screen and (max-width: 480px) {\n    font-size: 12px;\n    padding: 5px 10px;\n  }\n"]))),Te=F.a.div(we||(we=Object(q.a)(["\n  font-size: xxx-large;\n  padding: 6px;\n  font-size: 0.8 rem;\n  color: white;\n  @media screen and (max-width: 480px) {\n    font-size: 30px;\n  }\n"]))),Pe=F.a.div(Ie||(Ie=Object(q.a)(["\n  display: grid;\n  grid-template-rows: repeat( 3, calc(130px / 4));\n  grid-template-columns: repeat(4, calc(130px / 4));\n  grid-gap: 1px;\n  padding: 10px;\n  @media screen and (max-width: 768px) {\n    display: grid;\n    grid-template-rows: repeat( 3, calc(130px / 4));\n    grid-template-columns: repeat(4, calc(130px / 4));\n    grid-gap: 1px;\n    padding: 10px;\n  }\n  @media screen and (max-width: 480px) {\n    display: grid;\n    grid-template-rows: repeat( 3, calc(70px / 4));\n    grid-template-columns: repeat(4, calc(70px / 4));\n    grid-gap: 1px;\n    padding: 10px;\n  }\n"]))),_e=F.a.div(Ce||(Ce=Object(q.a)(["\n  width: auto;\n  background: rgba(",", 0.8);\n  border: ",";\n  border-bottom-color: rgba(",", 0.5);\n  border-top-color: rgba(",", 1);\n  border-right-color: rgba(",", 1);\n  border-left-color: rgba(",", 0.5);\n"])),(function(e){return 0===e.type?"none":e.color}),(function(e){return 0===e.type?"0px solid":"4px solid"}),(function(e){return e.color}),(function(e){return e.color}),(function(e){return e.color}),(function(e){return e.color})),Be=function(e){var n=e.gameover,t=e.title,r=e.data;return Object(le.jsxs)(Je,{gameOver:n,children:[Object(le.jsx)(Qe,{children:t}),Object(le.jsx)(Te,{children:r})]})},De=F.a.div(Se||(Se=Object(q.a)(["\n  width: 100vw;\n  height: 100vh;\n  background-size: cover;\n  outline: none;\n"]))),Ne=F.a.div(ke||(ke=Object(q.a)(["\n  display: flex;\n  align-items: flex-start;\n  margin: 0 auto;\n  height: 80%;\n  aside {\n    width: 100%;\n    max-width: 200px;\n    display: block;\n    padding: 0 20px;\n  }\n"]))),Le=t.p+"static/media/pop.3397007d.mp3",Ye=t.p+"static/media/tetriminos.24b50935.mp3",Me=t(28),Ge=t(30),Ue=function(e){var n=e.stage,t=e.user,r=e.score;return n?Object(le.jsxs)(je,{children:[Object(le.jsxs)("div",{className:"flex align-center justify-sa",children:[Object(le.jsx)("h3",{style:{color:"#fff"},children:t}),Object(le.jsx)("h2",{style:{color:"#fff"},children:r})]}),Object(le.jsx)("table",{style:{border:"1px solid"},children:n.map((function(e,n){return Object(le.jsx)("tbody",{children:Object(le.jsx)("tr",{style:{height:"15px",padding:"0px",margin:"0px"},children:e.map((function(e,n){return 0===e[0]?Object(le.jsx)("td",{style:{border:0,width:"15px",padding:"0px",margin:"0px",height:"2px",backgroundColor:"#000",opacity:"30%"},type:e[0]},"col-".concat(n)):Object(le.jsx)("td",{style:{border:0,width:"27px",padding:"8px",margin:"0px",height:"2px",backgroundColor:"#b3ffff"},type:e[0]},n)}))})},"s-".concat(n))}))})]}):Object(le.jsx)("span",{children:"Loading..."})},He=function(e){var n=e.stage,t=e.nextPiece;return Object(le.jsxs)(ze,{children:[Object(le.jsx)(Qe,{children:"Next"}),Object(le.jsx)(Pe,{children:n&&t.length>0&&(null===n||void 0===n?void 0:n.map((function(e,n){return e.map((function(e,n){var t;return Object(le.jsx)(_e,{type:e[0],color:null===(t=m[e[0]])||void 0===t?void 0:t.color},n)}))})))})]})},Xe=t(138),We=t(139),Ze=t(140),qe=function(){var e=Object(Z.b)(),n=Object(Z.c)((function(e){return e.player})),t=Object(Z.c)((function(e){return e.room})),a=Object(Z.c)((function(e){return e.players})),i=Object(r.useState)(!1),o=Object(c.a)(i,2),s=o[0],l=o[1],b=Object(r.useState)(new Audio(Ye)),g=Object(c.a)(b,1)[0];Object(r.useEffect)((function(){g.addEventListener("ended",(function(){return g.play()}))}),[]);var h=Object(r.useState)(null),O=Object(c.a)(h,2),y=O[0],E=O[1],w=function(e,n){var t=Object(r.useState)({pos:{x:2,y:2},tetromino:m[0].shape,collided:!1}),a=Object(c.a)(t,2),i=a[0],o=a[1],s=Object(r.useState)({pos:{x:0,y:0},tetromino:null,collided:!1}),d=Object(c.a)(s,2),l=d[0],p=d[1],u=function(e,n){var t=e.map((function(n,t){return e.map((function(e){return e[t]}))}));return n>0?t.map((function(e){return e.reverse()})):t.reverse()},b=Object(r.useCallback)((function(t){var r,a,i={pos:{x:4,y:0},tetromino:null===(r=m[n.next_piece[0]])||void 0===r?void 0:r.shape,collided:!1};n.next_piece.shift(),t&&A(i,t,{x:0,y:0})?(e({type:j}),e({type:X})):o({pos:{x:4,y:0},tetromino:i.tetromino,collided:!1}),p({pos:{x:2,y:2},tetromino:null===(a=m[n.next_piece[0]])||void 0===a?void 0:a.shape,collided:!1})}),[n.next_piece]);return[i,l,function(e){var n=e.x,t=e.y,r=e.collided;o((function(e){return Object(x.a)(Object(x.a)({},e),{},{pos:{x:e.pos.x+n,y:e.pos.y+t},collided:r})}))},b,function(e,n){var t=0,r=JSON.parse(JSON.stringify(i));if(4===r.tetromino.length){for(var a=0;a<r.tetromino[0].length;a++)if("I"!==r.tetromino[0][a]){t=1;break}r.tetromino=1==t?[["I","I","I","I"],[0,0,0,0],[0,0,0,0],[0,0,0,0]]:[[0,"I",0,0],[0,"I",0,0],[0,"I",0,0],[0,"I",0,0]]}else r.tetromino=u(r.tetromino,n);for(var c=r.pos.x,s=1;A(r,e,{x:0,y:0});)if(r.pos.x+=s,(s=-1*s-(s>0?1:-1))>r.tetromino[0].length)return u(r.tetromino,-n),void(r.pos.x=c);o(r)}]}(e,t),I=Object(c.a)(w,5),C=I[0],S=I[1],k=I[2],R=I[3],J=I[4],z=u(C,S,R,t.gameOver,n.username,t.name,a,t.next_piece),Q=Object(c.a)(z,4),T=Q[0],P=Q[1],_=Q[2],B=function(e,n,t){var a=Object(r.useState)(0),i=Object(c.a)(a,2),o=i[0],s=i[1],d=Object(r.useState)(0),A=Object(c.a)(d,2),l=A[0],u=A[1],x=Object(r.useState)(0),m=Object(c.a)(x,2),b=m[0],g=m[1],f=Object(r.useState)(new Audio(Le)),j=Object(c.a)(f,1)[0],h=[40,100,300,1200],O=Object(r.useCallback)((function(){e>0&&(s((function(n){return n+h[e-1]*(b+1)})),u((function(n){return n+e})),j.play(),p.emit("new score",{user:t,score:o+h[e-1]*(b+1),room:n}))}),[b,h,e]);return Object(r.useEffect)((function(){O()}),[O,e,o]),[o,s,l,u,b,g]}(Q[3],t.name,n.username),D=Object(c.a)(B,6),N=D[0],L=D[1],Y=D[2],M=D[3],G=D[4],U=D[5],H=function(e){A(C,T,{x:e,y:0})||k({x:e,y:0})};Object(r.useEffect)((function(){for(var e=t.gameStarted?1:0,n=new Array(10).fill(["P","merged"]),r=0;r<20;r++)T[r][0]===["P","merged"]&&e++;for(;e>0;)T.push(n),T.shift(),e--}),[n.row]),Object(r.useEffect)((function(){t.next_piece.length<=5&&!0===t.gameStarted&&p.emit("new_tetriminos",t.name)}),[t.next_piece.length]),Object(r.useEffect)((function(){var r;!0===t.gameOver&&(E(null),e((r={user:n.username,room:t.name},function(e){p.emit("Loser",r)})))}),[t.gameOver]),Object(r.useEffect)((function(){!0===t.gameStarted&&(l(!0),g.play(),_(d()),E(1e3),R(),e({type:f}),L(0),M(0),U(0))}),[t.gameStarted]);var W=function(){A(C,T,{x:0,y:1})?(C.pos.y<1&&(e({type:j}),e({type:X}),E(y)),k({x:0,y:0,collided:!0})):k({x:0,y:1,collided:!1}),Y>G+1&&(U((function(e){return e+1})),G>0&&E(1e3/G+10))};return function(e,n){var t=Object(r.useRef)();Object(r.useEffect)((function(){t.current=e}),[e]),Object(r.useEffect)((function(){if(null!==n){var e=setInterval((function(){t.current()}),n);return function(){clearInterval(e)}}}),[n])}((function(){W()}),y),Object(le.jsx)(De,{role:"button",tabIndex:"0",onKeyDown:function(e){var n=e.keyCode;t.gameOver||(37===n?H(-1):39===n?H(1):40===n?(E(y),W()):38===n?"D"!=C.tetromino[0][1]&&J(T,1):32===n&&function(){for(var e=0,n=0;n<20;n++)if(A(C,T,{x:0,y:n})){e=n;break}for(var t=e;t>0;t--)if(!A(C,T,{x:0,y:t})){k({x:0,y:t,collided:!1});break}}())},onKeyUp:function(e){e.preventDefault(),function(e){var n=e.keyCode;t.gameOver||40!==n||E(0==G?1e3:y)}(e)},children:Object(le.jsx)(Xe.a,{children:Object(le.jsx)(Ne,{children:Object(le.jsxs)(We.a,{className:"w-100",children:[Object(le.jsxs)(Ze.a,{xl:a.length>1?7:12,lg:12,className:"flex justify-center red-tetris__col-stage mb-20",children:[Object(le.jsx)(Re,{gameOver:t.gameOver,stage:T,player:n}),Object(le.jsxs)("aside",{children:[Object(le.jsx)(He,{nextPiece:t.next_piece,stage:P}),Object(le.jsx)(Be,{title:"Score",data:N}),Object(le.jsx)(Be,{title:"Level",data:G}),Object(le.jsxs)("div",{style:{cursor:"pointer",textAlign:"center",padding:"10px 0px 20px"},className:"sound-icon-wrapper",children:[!n.admin||t.gameStarted||t.gameOver?"":Object(le.jsx)(Me.a,{onClick:function(){p.emit("start game",t.name)},icon:Ge.a,size:"2x",className:"sound-icon"}),n.admin&&t.gameOver?Object(le.jsx)(Me.a,{onClick:function(){e({type:v}),p.emit("start game",t.name)},icon:Ge.b,size:"2x",className:"sound-icon"}):"",s?Object(le.jsx)(Me.a,{onClick:function(){l(!1),g.pause()},icon:Ge.d,size:"2x",className:"sound-icon"}):Object(le.jsx)(Me.a,{onClick:function(){l(!0),g.play()},icon:Ge.c,size:"2x",className:"sound-icon"})]})]})]}),a?Object(le.jsx)(Ze.a,{className:"spectersWrapper",xl:5,lg:12,children:Object(le.jsx)(We.a,{className:"w-100",children:a.map((function(e,t){if(e.user!==n.user)return e.user!==n.username?Object(le.jsx)(Ze.a,{xl:6,lg:12,children:Object(le.jsx)(Ue,{stage:e.stage&&e.stage.length>0?e.stage:d(),user:e.user,score:e.score},t)}):""}))})}):""]})})})})},Fe=t(17),Ke=t(70),Ve=t.n(Ke),$e=function(){var e=Object(Z.b)(),n=Object(r.useState)([]),t=Object(c.a)(n,2),a=t[0],i=t[1],o=Object(r.useState)(""),d=Object(c.a)(o,2),A=d[0],l=d[1],p=Object(r.useState)("Solo"),u=Object(c.a)(p,2),x=u[0],m=u[1],b=Object(Z.c)((function(e){return e.player}));return Object(r.useEffect)((function(){Ve.a.get("".concat("http://localhost:4242","/getRooms")).then((function(e){i(Object(Fe.a)(e.data))}))}),[]),Object(le.jsxs)(ee,{onSubmit:function(n){return function(n){n.preventDefault(),""!==A.trim()?(window.location.hash="".concat(A.trim(),"[").concat(b.username,"]"),e({type:y,data:x})):(l(""),s.b.error("[ERROR] Player and Room names must be 1 to 12 alphanumeric characters in length"))}(n)},children:[Object(le.jsxs)(ne,{children:[Object(le.jsxs)(te,{children:[Object(le.jsx)(K,{placeholder:"Enter Room name",onChange:function(e){return l(e.target.value)}}),Object(le.jsxs)(re,{value:x,onChange:function(e){return m(e.target.value)},children:[Object(le.jsx)("option",{children:"Solo"}),Object(le.jsx)("option",{children:"Multiplayer"})]})]}),Object(le.jsx)(V,{type:"submit",children:"Submit"})]}),a.length>0&&Object(le.jsxs)(ae,{children:[Object(le.jsx)(ie,{children:Object(le.jsxs)(ce,{children:[Object(le.jsx)(se,{children:"Room Name"}),Object(le.jsx)(se,{children:"Members"}),Object(le.jsx)(se,{children:"Mode"}),Object(le.jsx)(se,{})]})}),Object(le.jsx)(oe,{children:a.map((function(e,n){return e.room.length>0&&Object(le.jsxs)(ce,{children:[Object(le.jsx)(de,{children:Object(le.jsx)("strong",{children:e.room})}),Object(le.jsxs)(de,{children:[e.members,"/5"]}),Object(le.jsx)(de,{children:e.mode}),Object(le.jsx)(de,{children:Object(le.jsx)(Ae,{onClick:function(){return window.location="".concat("http://localhost:3000","/#").concat(e.room,"[").concat(b.username,"]")},children:"Join"})})]},n)}))})]})]})};t(134),t(135),t(136);var en,nn,tn=function(){var e=Object(Z.c)((function(e){return e})),n=Object(Z.b)();return Object(le.jsxs)("div",{children:[Object(le.jsx)("h1",{onClick:function(){p.emit("leaveRoom"),n({type:"RESET_STATE"}),window.location.hash=""},style:{cursor:"pointer"},children:"Red Tetris"}),Object(le.jsx)(s.a,{}),""===e.player.username?Object(le.jsx)(pe,{}):""===e.room.name?Object(le.jsx)($e,{}):Object(le.jsx)(qe,{})]})},rn=t(16),an={username:"",connected:!1,lost:!1,admin:!1,row:0},on={name:"",members:0,gameStarted:!1,mode:"Solo",next_piece:[],gameOver:!1},cn="UPDATE_SCORE",sn="ADD_PLAYER",dn=[],An=Object(rn.c)({player:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:an,n=arguments.length>1?arguments[1]:void 0;switch(n.type){case G:return Object(x.a)(Object(x.a)({},e),{},{username:n.data});case U:return Object(x.a)(Object(x.a)({},e),{},{username:n.data.user,connected:!0,admin:!!n.data.is_admin});case H:return Object(x.a)(Object(x.a)({},e),{},{admin:!0});case X:return Object(x.a)(Object(x.a)({},e),{},{lost:!0});case W:return Object(x.a)(Object(x.a)({},e),{},{row:n.data});case f:return Object(x.a)(Object(x.a)({},e),{},{lost:!1});default:return e}},players:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:dn,n=arguments.length>1?arguments[1]:void 0;switch(n.type){case"RESET_STATE":return dn;case cn:return{score:n.data};case sn:return Object(Fe.a)(n.data);default:return e}},room:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:on,n=arguments.length>1?arguments[1]:void 0;switch(n.type){case"RESET_STATE":return on;case b:return Object(x.a)(Object(x.a)({},e),{},{members:n.data});case f:return Object(x.a)(Object(x.a)({},e),{},{gameStarted:!0,gameOver:!1});case j:return Object(x.a)(Object(x.a)({},e),{},{gameStarted:!1,gameOver:!0,next_piece:[]});case g:var t=[].concat(Object(Fe.a)(e.next_piece),Object(Fe.a)(n.data));return Object(x.a)(Object(x.a)({},e),{},{next_piece:Object(Fe.a)(t)});case v:return Object(x.a)(Object(x.a)({},e),{},{next_piece:[]});case h:return Object(x.a)(Object(x.a)({},e),{},{name:n.data});case O:return Object(x.a)(Object(x.a)({},e),{},{name:n.data.room});case y:return Object(x.a)(Object(x.a)({},e),{},{mode:n.data});default:return e}}}),ln=t(71),pn=window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__||rn.d,un=Object(rn.e)(An,{},pn(Object(rn.a)(ln.a))),xn=t(72),mn=function(){var e=window.location.hash.substring(1);if(e.trim()){var n=function(e){var n=Object(xn.a)(/([0-9A-Za-z]{1,12})\[([0-9A-Za-z]{1,12})\]/,{room:1,usr:2});return e.match(n)||(s.b.error("[ERROR] Player and Room names must be 1 to 12 alphanumeric characters in length"),!1)}(e);n&&p.emit("joinRoom",{user:n.groups.usr,room:n.groups.room,mode:un.getState().room.mode})}};en=un.dispatch,nn=un.getState,window.onhashchange=function(){mn()},p.on("new score",(function(e){en({type:sn,data:e})})),p.on("add row",(function(){var e=nn();en({type:W,data:e.player.row+1})})),p.on("Join_success",(function(e){en({type:U,data:e}),en({type:O,data:e})})),p.on("Stage",(function(e){for(var n=0;n<e.players.length;n++)e.user==e.players[n].user&&(e.players[n]={user:e.user,score:e.players[n].score,stage:e.stage});en({type:sn,data:e.players})})),p.on("start game",(function(e){en({type:g,data:e}),en({type:f});var n=[];un.getState().players.map((function(e){n.push(Object(x.a)(Object(x.a)({},e),{},{stage:[],score:0}))})),en({type:sn,data:n})})),p.on("new_tetriminos",(function(e){en({type:g,data:e})})),p.on("new member",(function(e){var n=[],t=0;for(t=0;t<e.length;t++)""!==e[t].user&&n.push({user:e[t].user,score:e[t].score,stage:[]});en({type:b,data:t}),en({type:sn,data:n})})),p.on("Winner",(function(e){en({type:j}),un.getState().player.username!==e.user&&en({type:X})})),p.on("Update Admin",(function(e){var n={user:e.user.user,is_admin:e.is_admin};en({type:U,data:n})})),p.on("TOASTIFY",(function(e){switch(e.type){case"error":s.b.error(e.message),setTimeout((function(){en({type:"RESET_STATE"}),window.location.hash=""}),500);break;case"success":s.b.success(e.message);break;default:s.b.error(e.message)}})),mn(),o.a.render(Object(le.jsx)(Z.a,{store:un,children:Object(le.jsx)(tn,{})}),document.getElementById("root"))}},[[137,1,2]]]);
//# sourceMappingURL=main.2862d8bc.chunk.js.map